# Лабораторная работа № 6-8. Очередь сообщений. <img src="https://github.com/Maxsmile123/Maxsmile123/blob/7b922b9e683c8fdbd59ab6d278493353004d7c9e/res/6091445.png" width="25px">

### Цель работы
Приобретение практических навыков в:
-	Управлении серверами сообщений (№6)
-	Применение отложенных вычислений (№7)
-   Интеграция программных систем друг с другом (№8)

---
### Задание
Реализовать распределенную систему по асинхронной обработке запросов. В данной
распределенной системе должно существовать 2 вида узлов: «управляющий» и
«вычислительный». Необходимо объединить данные узлы в соответствии с той топологией,
которая определена вариантом. Связь между узлами необходимо осуществить при помощи
технологии очередей сообщений. Также в данной системе необходимо предусмотреть проверку
доступности узлов в соответствии с вариантом. При убийстве («kill -9») любого вычислительного
узла система должна пытаться максимально сохранять свою работоспособность, а именно все
дочерние узлы убитого узла могут стать недоступными, но родительские узлы должны сохранить
свою работоспособность.</br>

Управляющий узел отвечает за ввод команд от пользователя и отправку этих команд на
вычислительные узлы. Список основных поддерживаемых команд: </br>
#### Создание нового вычислительного узла
Формат команды: `create id [parent]` </br>
id – целочисленный идентификатор нового вычислительного узла </br>
parent – целочисленный идентификатор родительского узла. Если топологией не предусмотрено
введение данного параметра, то его необходимо игнорировать (если его ввели)</br>
Формат вывода:</br>
«Ok: pid», где pid – идентификатор процесса для созданного вычислительного узла</br>
«Error: Already exists» - вычислительный узел с таким идентификатором уже существует</br>
«Error: Parent not found» - нет такого родительского узла с таким идентификатором</br>
«Error: Parent is unavailable» - родительский узел существует, но по каким-то причинам с ним не
удается связаться</br>
«Error: [Custom error]» - любая другая обрабатываемая ошибка</br>
Пример:</br>
create 10 5</br>
Ok: 3128</br>
> Примечания: создание нового управляющего узла осуществляется пользователем программы
при помощи запуска исполняемого файла. Id и pid — это разные идентификаторы.

#### Исполнение команды на вычислительном узле </br>

Формат команды: `exec id [params]` </br>
id – целочисленный идентификатор вычислительного узла, на который отправляется команда</br>
Формат вывода:</br>
Ok: id: [result], где result – результат выполненной команды </br>
Error: id: Not found - вычислительный узел с таким идентификатором не найден</br>
Error: id: Node is unavailable - по каким-то причинам не удается связаться с вычислительным
узлом </br>
Error: id: [Custom error] - любая другая обрабатываемая ошибка </br>
Пример: </br>
Можно найти в описании конкретной команды, определенной вариантом задания.
Примечание: выполнение команд должно быть асинхронным. Т.е. пока выполняется команда на
одном из вычислительных узлов, то можно отправить следующую команду на другой
вычислительный узел

---
Для запуска нужно установить библиотеку ZeroMQ. Установка и запуск программы:
```shell
apt-get install libzmq3-dev

g++ server.cpp -lzmq -o server message.cpp ZMQTools.cpp
g++ client.cpp -lzmq -o client message.cpp ZMQTools.cpp

./client
```

### Вариант 20.
Топология: общее дерево </br>
Тип проверки: ping id </br>
Команда для вычисления: поиск подстроки в строке </br>

Выполнено под OS Linux.
