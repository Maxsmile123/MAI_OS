# Лабораторная работа № 3. Потоки.

### Задание   

---

Составить программу на языке Си, обрабатывающую данные в многопоточном режиме. При обработки использовать стандартные средства создания потоков операционной системы (Windows/Unix). Ограничение потоков должно быть задано ключом запуска вашей программы.

Так же необходимо уметь продемонстрировать количество потоков, используемое вашей программой с помощью стандартных средств операционной системы.

В отчете привести исследование зависимости ускорения и эффективности алгоритма от входящих данных и количества потоков. Получившиеся результаты необходимо объяснить.



### Вариант 5. Отсортировать массив целых чисел при помощи четно-нечетной сортировки Бетчера.

---
Выполнено под OC Linux.

Запускать следует так: 
```shell
gcc lab3.c queue.h queue.c -lm -lpthread
```
Программа на вход принимает количество потоков. Отрицательное число означает, что количество потоков неограниченно.

Написал скрипт для сбора данных о работе времени программы - `run.sh`</br>
Используте параметр `m` если хотите получать усреднённые данные по каждому потоку (для одного потока запустится 10 раз и возьмётся среднее значение, для двух потоков также...)</br>
Программа запускается при потоках от 1 до 60.</br>
Для запуска, не забудьте предоставить файлу право на запуск:
```shell
chmod +x ./run.sh
```

Также написан скрипт на Python, строющий графики зависимости эффективности и ускорения алгоритма от входных данных и кол-ва потоков.
В Y1, Y2, Y3 - значения времени работы программы для размеров массива 256, 25600, 256000 (Собрано при помощи run.sh).</br>
X1 - Кол-во потоков. </br>
Ускорение считается по формуле `T[0]/T[i]`, где T[0] - время работы программы с одним потоком, а T[i] - время работы с i потоками.</br>
Эффективность считается по формуле `T[0]/(i * T[i])`, где T[0] - время работы программы с одним потоком, а T[i] - время работы с i потоками, i - кол-во потоков. </br>  
Строиться график только для эффективности - для ускорения стоит модифицировать формулу и изменить название оси ординат.

### Примеры использования:
```shell
./a.out                                 
Limit of threads is not set. Default value is 10.
Select an action:
1. Read the array
2. Generate an array automatically
1
Enter array :
565 867 545 1
Sorted array:
1 545 565 867
```
```shell
./a.out -t 5
Select an action:
1. Read the array
2. Generate an array automatically
2
Enter the size of array:30
Enter a range of numbers in the array. Max value is 2147483647
100
Your array: 15 98 -16 -71 -41 38 -89 61 46 -84 -28 -41 -77 37 55 84 -9 40 3 50 26 13 -6 -85 41 91 9 76 28 2
Sorted array:
-89 -85 -84 -77 -71 -41 -41 -28 -16 -9 -6 2 3 9 13 15 26 28 37 38 40 41 46 50 55 61 76 84 91 98
```
